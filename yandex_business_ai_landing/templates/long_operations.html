<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Long Operations - AI Бизнес помощник</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body>
    <!-- Include Header -->
    {% include 'header.html' %}

    <!-- Main Content -->
    <main>
        <div class="container">
            <h2>Журнал взаимодействия с языковой моделью</h2>
            <p><a href="{{ url_for('personal_cabinet_routes.test_long_operations') }}" class="btn">Test Long
                    Operations</a></p>
            {% if current_user.operations %}
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Status</th>
                        <th>Request</th>
                        <th>Response</th>
                        <th>Error</th>
                    </tr>
                </thead>
                <tbody>
                    {% for operation in current_user.operations %}
                    <tr>
                        <td>{{ operation.id }}</td>
                        <td>
                            {% if operation.status == 'done' %}
                            <span class="status done">Done</span>
                            {% elif operation.status == 'processing' %}
                            <span class="status processing">Processing</span>
                            {% else %}
                            <span class="status error">Error</span>
                            {% endif %}
                        </td>
                        <td>{{ operation.request }}</td>
                        <td>{{ operation.response or '-' }}</td>
                        <td>{{ operation.error or '-' }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p>You have no long operations.</p>
            {% endif %}
        </div>
    </main>
</body>

</html>