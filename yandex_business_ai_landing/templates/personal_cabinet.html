<!doctype html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <title>Личный кабинет - AI Бизнес помощник</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <script>
        function refreshLongOperations() {
            fetch('{{ url_for("personal_cabinet_routes.long_operations") }}')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('long-operations').innerHTML = html;
                })
                .catch(error => {
                    console.error('Error fetching long operations:', error);
                });
        }

        setInterval(refreshLongOperations, 60000); // Refresh every 1 minute
        window.onload = refreshLongOperations; // Refresh on page load
    </script>
</head>

<body>
    <!-- Include Header -->
    {% include 'header.html' %}

    <!-- Main Content -->
    <main>
        <div class="container">
            <h2>Добро пожаловать в личный кабинет, {{ current_user.username }}!</h2>

            <form method="POST" action="{{ url_for('personal_cabinet_routes.update_personal_cabinet') }}">
                <p>
                    <label for="company_name">Название компании:</label>
                    <input type="text" id="company_name" name="company_name" value="{{ current_user.company_name }}">
                </p>
                <p>
                    <label for="company_description">Описание компании:</label>
                    <textarea id="company_description"
                        name="company_description">{{ current_user.company_description }}</textarea>
                </p>
                <p>
                    <label for="additional_info">Дополнительная информация:</label>
                    <textarea id="additional_info" name="additional_info">{{ current_user.additional_info }}</textarea>
                </p>
                <p>
                    <button type="submit">Сохранить</button>
                </p>
            </form>

        </div>
    </main>
</body>

</html>